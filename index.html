<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#D32F2F">
    
    <title>Cesta B√°sica em Cuiab√° e V√°rzea Grande | Dona Ant√¥nia</title>
    <meta name="description" content="A melhor Cesta B√°sica de Cuiab√° e V√°rzea Grande. Entregamos no CPA, Tijucal, Cristo Rei e regi√£o.">
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <!-- DADOS ESTRUTURADOS (FAQ) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "Onde comprar cesta b√°sica em Cuiab√°?",
        "acceptedAnswer": { "@type": "Answer", "text": "Na Dona Ant√¥nia! Temos o melhor pre√ßo e entregamos em todos os bairros." }
      }, {
        "@type": "Question",
        "name": "Voc√™s entregam em V√°rzea Grande?",
        "acceptedAnswer": { "@type": "Answer", "text": "Sim! Atendemos toda a regi√£o de V√°rzea Grande." }
      }]
    }
    </script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- CORRE√á√ÉO GLOBAL --- */
        * { box-sizing: border-box; }

        /* --- ESTILOS GERAIS --- */
        :root {
            --cor-primaria: #D32F2F; 
            --cor-ativa: #ffffff;
            --cor-inativa: #ffebee;
            --cor-whatsapp: #25D366;
            --cor-texto: #222;
            --cor-fundo: #fafafa;
        }

        html { background-color: #e0e0e0; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--cor-fundo);
            color: var(--cor-texto);
            margin: 0 auto; 
            padding: 0;
            padding-top: 90px; /* Ajustado para o novo header */
            padding-bottom: 80px;
            max-width: 480px; 
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            position: relative; 
        }

        /* --- CABE√áALHO (AJUSTADO: Logo menor, √≠cones pr√≥ximos) --- */
        header {
            background-color: white;
            height: 80px; /* Altura ajustada */
            padding: 5px 15px; /* Padding lateral reduzido para logo ir p/ esquerda */
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 480px;
            z-index: 1000;
        }
        .header-left { display: flex; align-items: center; flex: 1; }
        
        .logo-pequena { 
            height: 55px; /* Logo Menor */
            width: auto; 
            max-width: 200px; 
            object-fit: contain; 
            margin-left: -5px; /* Puxar um pouquinho mais pra esquerda */
        }
        
        .header-icons { 
            display: flex; 
            gap: 10px; /* √çcones mais pr√≥ximos */
            align-items: center; 
        }

        .icon-btn {
            font-size: 32px; /* √çcones levemente ajustados */
            color: var(--cor-primaria);
            text-decoration: none; display: flex; align-items: center;
            justify-content: center; transition: transform 0.2s;
        }
        .icon-btn:active { transform: scale(0.9); }
        .ic-zap { color: #25D366; }
        .ic-face { color: #1877F2; }
        .ic-insta { color: #E1306C; }

        /* --- NAVEGA√á√ÉO --- */
        .bottom-nav {
            position: fixed; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 100%; max-width: 480px; background-color: #111;
            border-top: 1px solid #333; display: flex; justify-content: space-around;
            padding: 10px 0; z-index: 1000; box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
        }
        .nav-item {
            flex: 1; text-align: center; background: none; border: none;
            cursor: pointer; color: #777; font-size: 12px;
            display: flex; flex-direction: column; align-items: center;
            gap: 5px; transition: color 0.3s;
        }
        .nav-item i { font-size: 24px; margin-bottom: 2px; }
        .nav-item.ativo { color: #fff; }
        .nav-item.ativo i { color: var(--cor-primaria); }
        
        /* --- P√ÅGINAS --- */
        .pagina { display: none; padding: 15px; animation: fadeIn 0.3s ease; }
        .pagina.visivel { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeInModal { from { opacity: 0; } to { opacity: 1; } }

        /* --- CART√ïES --- */
        .card { background: white; border-radius: 12px; padding: 15px; margin-bottom: 15px; border: 1px solid #f0f0f0; box-shadow: 0 2px 5px rgba(0,0,0,0.02); }
        
        /* ESTILO CESTAS */
        .card-cesta { padding: 0; overflow: hidden; border: 1px solid #eee; }
        .cesta-header { background-color: var(--cor-primaria); padding: 15px; text-align: center; color: white; }
        .cesta-header h3 { margin: 0; color: white; border: none; padding: 0; font-size: 20px; text-transform: uppercase; letter-spacing: 1px; }
        .cesta-body { padding: 15px; }
        
        .lista-precos-cesta {
            background-color: #f9f9f9; border-radius: 8px; padding: 12px;
            margin: 15px 0; border: 1px solid #eee;
        }
        .item-preco { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; font-size: 15px; color: #444; }
        .item-preco:last-child { margin-bottom: 0; }
        .item-preco strong { color: #D32F2F; font-size: 18px; }

        h2, h3 { color: var(--cor-primaria); margin-top: 0; }
        h3 { font-size: 18px; border-bottom: 1px solid #f0f0f0; padding-bottom: 8px; }

        .galeria-fotos { display: flex; gap: 10px; margin-bottom: 10px; }
        .galeria-fotos img { width: 50%; aspect-ratio: 1 / 1; object-fit: cover; border-radius: 8px; background: #eee; cursor: pointer; }

        /* --- BOT√ïES DE A√á√ÉO (CESTAS) --- */
        .botoes-wrapper {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn {
            display: flex; align-items: center; justify-content: center;
            width: 100%; padding: 15px; border: none; border-radius: 8px;
            font-size: 16px; font-weight: bold; cursor: pointer;
            text-decoration: none; color: white; text-align: center;
            flex: 1; 
        }
        .btn-whatsapp { background-color: #25D366; }
        .btn-compartilhar-produto { background-color: #0288D1; }
        
        /* Formul√°rios */
        input, select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 10px; font-size: 16px; }

        /* --- MODAL GALERIA (FULL SCREEN) --- */
        .modal-imagem {
            display: none; position: fixed; z-index: 3000; left: 0; top: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.95); 
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .modal-conteudo-wrapper {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        .modal-conteudo { 
            width: 100%; /* Largura Total */
            height: auto; 
            max-height: 70vh;
            object-fit: contain; 
            border-top: 1px solid #333;
            border-bottom: 1px solid #333; 
            background-color: black;
        }
        .modal-controles {
            width: 100%; display: flex; justify-content: center;
            align-items: center; gap: 60px; padding: 10px;
        }
        .nav-seta {
            color: white; font-size: 40px; cursor: pointer; padding: 20px;
            background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%; width: 70px; height: 70px;
            display: flex; align-items: center; justify-content: center;
        }
        .nav-seta:active { background: rgba(255,255,255,0.3); }
        
        .btn-fechar-galeria {
            position: absolute; top: 20px; right: 20px;
            color: white; font-size: 35px; font-weight: bold;
            cursor: pointer; z-index: 3001; background: rgba(0,0,0,0.5); 
            border-radius: 50%; width: 50px; height: 50px;
            border: none; display: flex; align-items: center; justify-content: center;
        }
        .contador-fotos { position: absolute; top: 25px; left: 25px; color: #ccc; font-size: 16px; }

        /* --- LISTA PAGAMENTO --- */
        .lista-pagamento { list-style: none; padding: 0; }
        .lista-pagamento li { padding: 10px 0; border-bottom: 1px solid #eee; font-size: 16px; display: flex; align-items: center; }
        .lista-pagamento i { color: var(--cor-primaria); width: 30px; font-size: 18px; }

        /* --- MODAL BRINDE --- */
        .modal-brinde { display: none; position: fixed; z-index: 2500; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); justify-content: center; align-items: center; animation: fadeInModal 0.3s; }
        .conteudo-brinde { background: linear-gradient(135deg, #FFEB3B, #FFF59D); width: 85%; max-width: 400px; border-radius: 20px; padding: 30px 20px; text-align: center; border: 4px solid #FBC02D; box-shadow: 0 0 50px rgba(255, 235, 59, 0.6); position: relative; }
        .titulo-brinde { color: #D32F2F; font-size: 26px; font-weight: 900; margin: 0; text-transform: uppercase; }
        .texto-brinde { font-size: 18px; color: #333; margin: 15px 0; font-weight: 500; }
        .btn-fechar-brinde { background: #D32F2F; color: white; border: none; padding: 12px 30px; font-size: 18px; border-radius: 30px; font-weight: bold; cursor: pointer; margin-top: 15px; box-shadow: 0 4px 0 #b71c1c; }
        
        /* --- AVISO FLUTUANTE (PWA - MAIS ALTO) --- */
        .aviso-instalar {
            position: fixed; bottom: 90px; 
            left: 50%; transform: translateX(-50%);
            width: 95%; max-width: 460px;
            background: linear-gradient(135deg, #FF6B6B, #D32F2F); color: white;
            padding: 15px 20px; border-radius: 15px; z-index: 1900;
            box-shadow: 0 4px 20px rgba(211, 47, 47, 0.5);
            display: none; flex-direction: row; align-items: center;
            justify-content: space-between; gap: 15px; animation: piscarSuave 3s infinite;
        }
        @keyframes piscarSuave {
            0% { box-shadow: 0 0 0 0 rgba(211, 47, 47, 0.7); }
            50% { box-shadow: 0 0 20px 10px rgba(211, 47, 47, 0); }
            100% { box-shadow: 0 0 0 0 rgba(211, 47, 47, 0); }
        }
        .texto-instalar-banner { flex: 1; font-size: 16px; line-height: 1.3; } .texto-instalar-banner strong { display: block; font-size: 19px; color: #FFEB3B; }
        .btn-acao-banner { background: white; color: var(--cor-primaria); font-weight: bold; padding: 10px 20px; border-radius: 30px; border: none; font-size: 14px; cursor: pointer; white-space: nowrap; box-shadow: 0 3px 0 rgba(0,0,0,0.1); }
        .btn-fechar-aviso { position: absolute; top: -10px; right: -5px; background: #333; color: white; border: none; border-radius: 50%; width: 30px; height: 30px; font-size: 16px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.3); }
        .card-instalacao-fixo { background: linear-gradient(135deg, #fff, #f3e5f5); border: 2px solid #7b1fa2; border-radius: 15px; padding: 20px; margin-bottom: 20px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .btn-instalacao-grande { background-color: #7b1fa2; color: white; font-size: 20px; padding: 20px; width: 100%; border: none; border-radius: 10px; margin-top: 15px; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 0 #4a148c; }

        /* --- MODAIS GERAIS --- */
        .modal-geral { display: none; position: fixed; z-index: 3000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.85); justify-content: center; align-items: center; flex-direction: column; animation: fadeInModal 0.3s; }
        .modal-card { background: white; width: 85%; max-width: 350px; border-radius: 20px; padding: 25px; text-align: center; position: relative; box-shadow: 0 10px 25px rgba(0,0,0,0.3); max-height: 90vh; overflow-y: auto; }
        .modal-card h3 { margin-top: 0; color: #333; font-size: 22px; }
        .modal-card p { color: #666; font-size: 16px; margin-bottom: 20px; }
        .btn-modal-acao { display: flex; align-items: center; justify-content: center; width: 100%; padding: 15px; border: none; border-radius: 10px; font-size: 18px; font-weight: bold; margin-bottom: 10px; cursor: pointer; color: white; text-decoration: none; box-shadow: 0 3px 0 rgba(0,0,0,0.2); }
        .btn-modal-acao.bg-zap { background-color: #25D366; }
        .btn-modal-acao.bg-grupo { background: linear-gradient(45deg, #075e54, #128C7E); }
        .btn-modal-acao.bg-face { background-color: #1877F2; }
        .btn-modal-acao.bg-insta { background-color: #E1306C; }
        .btn-fechar-modal-x { position: absolute; top: 10px; right: 10px; background: #eee; border: none; border-radius: 50%; width: 30px; height: 30px; font-size: 20px; color: #333; cursor: pointer; }

    </style>
</head>
<body>

    <!-- CABE√áALHO FIXO (Ajustado) -->
    <header>
        <div class="header-left">
            <!-- Logo Horizontal Menor e mais √† esquerda -->
            <img src="img/logo.png" onerror="this.src='https://placehold.co/180x60/ffffff/D32F2F?text=DONA+ANT√îNIA'" alt="Logo Dona Ant√¥nia" class="logo-pequena">
        </div>
        <div class="header-icons">
            <!-- Redes Sociais Apenas (Pr√≥ximos) -->
            <a href="https://wa.me/5565998150975" class="icon-btn ic-zap"><i class="fab fa-whatsapp"></i></a>
            <a href="https://facebook.com/SEU_FACEBOOK" target="_blank" class="icon-btn ic-face"><i class="fab fa-facebook"></i></a>
            <a href="https://instagram.com/SEU_INSTA" target="_blank" class="icon-btn ic-insta"><i class="fab fa-instagram"></i></a>
        </div>
    </header>

    <!-- P√ÅGINA 1: CESTAS -->
    <div id="pag-cestas" class="pagina visivel">
        <div class="card" style="text-align: center; background-color: #fff3e0;">
            <p style="margin: 0; font-weight: bold; color: #E65100;">
                <i class="fas fa-truck"></i> Entregas em Cuiab√° e V√°rzea Grande
            </p>
        </div>

        <!-- Cesta 1 -->
        <div class="card card-cesta">
            <div class="cesta-header"><h3>CESTA GRANDE</h3></div>
            <div class="cesta-body">
                <div class="galeria-fotos">
                    <img src="img/cesta-grande.jpg" onerror="this.src='https://placehold.co/300x300?text=Foto1'" onclick="abrirGaleria(this)">
                    <img src="img/cesta-grande-2.jpg" onerror="this.src='https://placehold.co/300x300?text=Foto2'" onclick="abrirGaleria(this)">
                </div>
                <div class="lista-precos-cesta">
                    <div class="item-preco"><span>Com Arroz Tio Alvino:</span><strong>R$ 380,00</strong></div>
                    <div class="item-preco"><span>Com Arroz Koblenz:</span><strong>R$ 390,00</strong></div>
                </div>
                <div class="botoes-wrapper">
                    <button class="btn btn-whatsapp" onclick="encomendar('Cesta Grande')">Encomendar</button>
                    <button class="btn btn-compartilhar-produto" onclick="compartilhar('Cesta Grande')">Compartilhar</button>
                </div>
            </div>
        </div>

        <!-- Cesta 2 -->
        <div class="card card-cesta">
            <div class="cesta-header"><h3>CESTA M√âDIA</h3></div>
            <div class="cesta-body">
                <div class="galeria-fotos">
                    <img src="img/cesta-media.jpg" onerror="this.src='https://placehold.co/300x300?text=Foto1'" onclick="abrirGaleria(this)">
                    <img src="img/cesta-media-2.jpg" onerror="this.src='https://placehold.co/300x300?text=Foto2'" onclick="abrirGaleria(this)">
                </div>
                <div class="lista-precos-cesta">
                    <div class="item-preco"><span>Com Arroz Tio Alvino:</span><strong>R$ 315,00</strong></div>
                    <div class="item-preco"><span>Com Arroz Koblenz:</span><strong>R$ 325,00</strong></div>
                </div>
                <div class="botoes-wrapper">
                    <button class="btn btn-whatsapp" onclick="encomendar('Cesta M√©dia')">Encomendar</button>
                    <button class="btn btn-compartilhar-produto" onclick="compartilhar('Cesta M√©dia')">Compartilhar</button>
                </div>
            </div>
        </div>

        <!-- Cesta 3 -->
        <div class="card card-cesta">
            <div class="cesta-header"><h3>CESTA PEQUENA</h3></div>
            <div class="cesta-body">
                <div class="galeria-fotos">
                    <img src="img/cesta-pequena.jpg" onerror="this.src='https://placehold.co/300x300?text=Foto1'" onclick="abrirGaleria(this)">
                    <img src="img/cesta-pequena-2.jpg" onerror="this.src='https://placehold.co/300x300?text=Foto2'" onclick="abrirGaleria(this)">
                </div>
                <div class="lista-precos-cesta">
                    <div class="item-preco"><span>Com Arroz Tio Alvino:</span><strong>R$ 210,00</strong></div>
                    <div class="item-preco"><span>Com Arroz Koblenz:</span><strong>R$ 220,00</strong></div>
                </div>
                <div class="botoes-wrapper">
                    <button class="btn btn-whatsapp" onclick="encomendar('Cesta Pequena')">Encomendar</button>
                    <button class="btn btn-compartilhar-produto" onclick="compartilhar('Cesta Pequena')">Compartilhar</button>
                </div>
            </div>
        </div>

        <!-- Cesta 4 -->
        <div class="card card-cesta">
            <div class="cesta-header"><h3>CESTA MINI</h3></div>
            <div class="cesta-body">
                <div class="galeria-fotos">
                    <img src="img/cesta-mini.jpg" onerror="this.src='https://placehold.co/300x300?text=Foto1'" onclick="abrirGaleria(this)">
                    <img src="img/cesta-mini-2.jpg" onerror="this.src='https://placehold.co/300x300?text=Foto2'" onclick="abrirGaleria(this)">
                </div>
                <div class="lista-precos-cesta">
                    <div class="item-preco"><span>Com Arroz Tio Alvino:</span><strong>R$ 160,00</strong></div>
                    <div class="item-preco"><span>Com Arroz Koblenz:</span><strong>R$ 170,00</strong></div>
                </div>
                <div class="botoes-wrapper">
                    <button class="btn btn-whatsapp" onclick="encomendar('Cesta Mini')">Encomendar</button>
                    <button class="btn btn-compartilhar-produto" onclick="compartilhar('Cesta Mini')">Compartilhar</button>
                </div>
            </div>
        </div>

        <!-- Cesta 5 -->
        <div class="card card-cesta">
            <div class="cesta-header"><h3>CESTA ECON√îMICA</h3></div>
            <div class="cesta-body">
                <div class="galeria-fotos">
                    <img src="img/cesta-economica.jpg" onerror="this.src='https://placehold.co/300x300?text=Foto1'" onclick="abrirGaleria(this)">
                    <img src="img/cesta-economica-2.jpg" onerror="this.src='https://placehold.co/300x300?text=Foto2'" onclick="abrirGaleria(this)">
                </div>
                <div class="lista-precos-cesta">
                    <!-- Ajuste: Apenas Tio Alvino -->
                    <div class="item-preco"><span>Com Arroz Tio Alvino:</span><strong>R$ 85,00</strong></div>
                </div>
                <div class="botoes-wrapper">
                    <button class="btn btn-whatsapp" onclick="encomendar('Cesta Econ√¥mica')">Encomendar</button>
                    <button class="btn btn-compartilhar-produto" onclick="compartilhar('Cesta Econ√¥mica')">Compartilhar</button>
                </div>
            </div>
        </div>

        <div class="card-instalacao-fixo pwa-install-promo">
            <h3>üì± Baixe o Aplicativo!</h3>
            <p>Para promo√ß√µes e facilidade, instale nosso App.</p>
            <button class="btn-instalacao-grande" onclick="instalarApp()">
                <i class="fas fa-download"></i> INSTALAR AGORA
            </button>
        </div>
    </div>

    <!-- P√ÅGINA 2: PAGAMENTO -->
    <div id="pag-pagamento" class="pagina">
        <div class="card">
            <h2>üí≥ Formas de Pagamento</h2>
            <p>Aceitamos as principais formas para facilitar sua vida:</p>
            <ul class="lista-pagamento">
                <li><i class="fas fa-money-bill-wave"></i> Dinheiro</li>
                <li><i class="fas fa-qrcode"></i> Pix (Transfer√™ncia Instant√¢nea)</li>
                <li><i class="fas fa-credit-card"></i> Cart√£o de D√©bito</li>
                <li><i class="fas fa-credit-card"></i> Cart√£o de Cr√©dito (at√© 3x sem juros)</li>
                <li><i class="fas fa-utensils"></i> Alelo Alimenta√ß√£o/Refei√ß√£o</li>
                <li><i class="fas fa-utensils"></i> Sodexo</li>
                <li><i class="fas fa-utensils"></i> Pluxee</li>
                <li><i class="fas fa-mobile-alt"></i> Ifood Benef√≠cios</li>
            </ul>
            <p style="color: red; font-size: 14px; text-align: center; margin-top: 20px;"><strong>‚ö†Ô∏è Aten√ß√£o:</strong> N√£o vendemos no boleto ou carn√™ (fiado).</p>
        </div>

        <!-- BANNER PWA PAGAMENTO -->
        <div class="card-instalacao-fixo pwa-install-promo">
            <h3>üì± App Dona Ant√¥nia</h3>
            <p>Instale para ver o sorteio toda semana!</p>
            <button class="btn-instalacao-grande" onclick="instalarApp()">
                <i class="fas fa-download"></i> INSTALAR APP
            </button>
        </div>
    </div>

    <!-- P√ÅGINA 3: SORTEIO -->
    <div id="pag-sorteio" class="pagina">
        <div class="card">
            <h2>üçÄ Sorteio Semanal</h2>
            <p>Preencha para concorrer a uma cesta gr√°tis toda sexta-feira!</p>
            <form onsubmit="event.preventDefault(); enviarNovoCadastro();">
                <label>Nome Completo: <span style="color:red">*</span></label>
                <input type="text" id="novo-nome" placeholder="Seu nome" required>
                <label>Telefone (Zap): <span style="color:red">*</span></label>
                <input type="tel" id="novo-telefone" placeholder="(65) 9..." required>
                <label>Cidade: <span style="color:red">*</span></label>
                <select id="novo-cidade" required>
                    <option value="">Selecione...</option>
                    <option value="Cuiab√°">Cuiab√°</option>
                    <option value="V√°rzea Grande">V√°rzea Grande</option>
                </select>
                <label>Bairro: <span style="color:red">*</span></label>
                <input type="text" id="novo-bairro" placeholder="Seu bairro" required>
                <button type="submit" class="btn btn-whatsapp"><i class="fab fa-whatsapp" style="margin-right: 8px;"></i> Confirmar</button>
            </form>
        </div>
        <div class="card-instalacao-fixo pwa-install-promo">
            <h3>üì± Obrigat√≥rio o App!</h3>
            <p>Garanta sua vaga no sorteio instalando o aplicativo.</p>
            <button class="btn-instalacao-grande" onclick="instalarApp()"><i class="fas fa-download"></i> INSTALAR AGORA</button>
        </div>
    </div>

    <!-- BANNER PWA FLUTUANTE -->
    <div id="aviso-instalar" class="aviso-instalar pwa-install-promo">
        <div class="texto-instalar-banner"><strong>Baixe nosso App!</strong>Para participar do sorteio.</div>
        <button class="btn-acao-banner" onclick="instalarApp()"><i class="fas fa-download"></i> INSTALAR</button>
        <button class="btn-fechar-aviso" onclick="fecharInstalacao()">&times;</button>
    </div>

    <!-- NAVEGA√á√ÉO INFERIOR -->
    <nav class="bottom-nav">
        <button class="nav-item ativo" id="btn-cestas" onclick="navegarPara('cestas')"><i class="fas fa-shopping-basket"></i>CESTAS</button>
        <button class="nav-item" id="btn-pagamento" onclick="navegarPara('pagamento')"><i class="fas fa-credit-card"></i>PAGAMENTO</button>
        <button class="nav-item" id="btn-sorteio" onclick="navegarPara('sorteio')"><i class="fas fa-gift"></i>SORTEIO</button>
    </nav>

    <!-- MODAL IMAGEM -->
    <div id="modalVisualizador" class="modal-imagem" onclick="fecharImagem()">
        <button class="btn-fechar-galeria" onclick="fecharImagem()">&times;</button>
        <div class="modal-conteudo-wrapper" onclick="event.stopPropagation()">
            <img id="imgAmpliada" src="" class="modal-conteudo">
        </div>
        <div class="modal-controles" onclick="event.stopPropagation()">
            <button class="nav-seta" onclick="mudarFoto(-1)">&#10094;</button>
            <button class="nav-seta" onclick="mudarFoto(1)">&#10095;</button>
        </div>
        <div id="contadorFotos" class="contador-fotos">1 / 2</div>
    </div>

    <!-- MODAL BRINDE -->
    <div id="modalBrinde" class="modal-brinde">
        <div class="conteudo-brinde">
            <h1>üéâ SURPRESA!</h1>
            <p>Na compra de qualquer cesta, ganhe <strong>1 Amaciante Yp√™ 2L</strong> de brinde!</p>
            <button class="btn-fechar-brinde" onclick="document.getElementById('modalBrinde').style.display='none'">EU QUERO!</button>
        </div>
    </div>

    <script>
        const TELEFONE = "5565998150975";
        const LINK_SITE = "donaantonia.com.br/oferta";

        function navegarPara(idPagina) {
            document.querySelectorAll('.pagina').forEach(p => p.classList.remove('visivel'));
            document.getElementById('pag-' + idPagina).classList.add('visivel');
            document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('ativo'));
            document.getElementById('btn-' + idPagina).classList.add('ativo');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function encomendar(produto) { 
            window.open(`https://wa.me/${TELEFONE}?text=Ol√°, quero encomendar a ${produto}`, '_blank'); 
        }

        function compartilhar(produto) {
            const texto = `Olha essa ${produto} da Dona Ant√¥nia! Confira: ${LINK_SITE}`;
            if (navigator.share) {
                navigator.share({ title: 'Dona Ant√¥nia', text: texto, url: window.location.href });
            } else {
                window.open(`https://wa.me/?text=${encodeURIComponent(texto)}`, '_blank');
            }
        }

        function enviarNovoCadastro() {
            const nome = document.getElementById('novo-nome').value.trim();
            const tel = document.getElementById('novo-telefone').value.trim();
            const cid = document.getElementById('novo-cidade').value;
            const bai = document.getElementById('novo-bairro').value.trim();
            if (!nome || !tel || !cid || !bai) { alert("Preencha todos os campos!"); return; }
            const msg = `CADASTRO SORTEIO:\nNome: ${nome}\nTel: ${tel}\nCidade: ${cid}\nBairro: ${bai}`;
            window.open(`https://wa.me/${TELEFONE}?text=${encodeURIComponent(msg)}`, '_blank');
        }

        // --- GALERIA ---
        let currentImages = [];
        let currentIndex = 0;

        function abrirGaleria(imgElement) {
            const parent = imgElement.parentElement;
            const imgs = parent.querySelectorAll('img');
            currentImages = [];
            imgs.forEach((img, index) => {
                currentImages.push(img.src);
                if (img === imgElement) currentIndex = index;
            });
            atualizarModalImagem();
            document.getElementById('modalVisualizador').style.display = 'flex';
        }

        function atualizarModalImagem() {
            document.getElementById('imgAmpliada').src = currentImages[currentIndex];
            document.getElementById('contadorFotos').innerText = `${currentIndex + 1} / ${currentImages.length}`;
        }

        function mudarFoto(dir) {
            currentIndex += dir;
            if (currentIndex >= currentImages.length) currentIndex = 0;
            if (currentIndex < 0) currentIndex = currentImages.length - 1;
            atualizarModalImagem();
        }
        function fecharImagem() { document.getElementById('modalVisualizador').style.display = 'none'; }

        let touchStartX = 0;
        let touchEndX = 0;
        const modalEl = document.getElementById('modalVisualizador');
        modalEl.addEventListener('touchstart', e => touchStartX = e.changedTouches[0].screenX);
        modalEl.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            if (touchEndX < touchStartX - 50) mudarFoto(1);
            if (touchEndX > touchStartX + 50) mudarFoto(-1);
        });

        // PWA & BRINDE
        let brindeMostrado = false;
        function mostrarBrinde() {
            brindeMostrado = true;
            document.getElementById('modalBrinde').style.display = 'flex';
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
        }
        window.onscroll = function() {
            if(brindeMostrado) return;
            if(document.getElementById('pag-cestas').classList.contains('visivel')) {
                if((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 200) mostrarBrinde();
            }
        };

        // PWA Logic
        let deferredPrompt;
        const avisoPwa = document.getElementById('aviso-instalar');
        const isIos = /iPhone|iPad|iPod/.test(navigator.userAgent) && !window.MSStream;

        // Check install state on load
        window.addEventListener('load', () => {
             if (localStorage.getItem('appInstalado')) {
                 document.querySelectorAll('.pwa-install-promo').forEach(el => el.style.display = 'none');
             } else if (!isIos) {
                 // If not installed and not iOS, ensure floating banner shows if not closed
                 if (!sessionStorage.getItem('bannerFechado')) {
                    avisoPwa.style.display = 'flex';
                 }
             }
        });

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault(); 
            deferredPrompt = e;
            if(!isIos && !localStorage.getItem('appInstalado') && !sessionStorage.getItem('bannerFechado')) {
                avisoPwa.style.display = 'flex';
            }
        });

        function instalarApp() {
            if(deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((res) => {
                    if(res.outcome === 'accepted') {
                        localStorage.setItem('appInstalado', 'true');
                        document.querySelectorAll('.pwa-install-promo').forEach(el => el.style.display = 'none');
                    }
                    deferredPrompt = null;
                });
            } else { 
                // Fallback message
                alert("Use o menu do navegador para adicionar √† tela inicial."); 
            }
        }
        function fecharInstalacao() { 
            avisoPwa.style.display = 'none'; 
            sessionStorage.setItem('bannerFechado', 'true');
        }

        window.onpopstate = function(event) {
            if (event.state && event.state.pagina) navegarPara(event.state.pagina);
            else navegarPara('cestas');
        };
        window.onload = function() {
            const path = window.location.pathname;
            if(path.includes('/sorteio')) navegarPara('sorteio');
            else if(path.includes('/pagamento')) navegarPara('pagamento');
            else navegarPara('cestas');
            
            // Check PWA again on load to be safe
             if (localStorage.getItem('appInstalado')) {
                 document.querySelectorAll('.pwa-install-promo').forEach(el => el.style.display = 'none');
             }
        };
    </script>
</body>
</html>
